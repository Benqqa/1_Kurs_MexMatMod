%% ??????:
%?????-??????? ? ??????? ???? ????? ?????? M, ????? ???? ?????? ???? ????? C,
%?????? ?????????? L,-->Ox
%r - 2 ??????????? ?????? ??????- ?????????
%m*r= F(i+1,i)+F((i-1),i)
%???(F(i+1,i))=> F(i+1,i)=-C(l2-l1)* e(i+1,i)(?????????? ??????)
%-C(Lact-L)*e(i+1,i)=-C ((|x(i)-x(i-1)|-L)*e(i+1,i))
%(1?????????)m*x=C*(|x(i)-x(i+1)|-L), ???  |x(i)-x(i+1)|>L;
%m*x(i)=C*(|x(i)-x(i+1)|-L)-C*(|x(i)-x(i-1)|-L)=F, x= ?????????

%% ???? ?????????:
%x=a=dv/dt=F
%??????? ??? ??? ?? ??????? ???, ??????? ??? ????????.
% dV=Fdt(???????????)
%V=F*t+Vo(??????????? ???????? ?? ????????? ???? dt)
%%%%%%%%%%%
%V(????t)=Vact+F*dt
%%%%%%%%%%%
% ????????? ??????????
%x(????t)=x(act)+V(????)*dt
%%
E_p=0;%??????
E_k=0;%????????????
E_f=0;
Ar_p=[];%????? ??? ???????? ???????
Ar_f=[];
Ar_k=[];
%---??????? '??????

N=10;% ?????????? ??????
c=1;% ????????
m=1;%?????
L=1; %?????????? ????? ?????????
dt=0.02;% ????????? ???
%--------
X=0:L:(N-1)*L;%?????? ????????? ?
V=zeros(1,N);
V(N)=0.1;
%-- ????????
figure
for it=1:1000%% ???????? ????????? ? ???????? ??? ??????? ???????
for i=2:N-1%%???????? ??????????? ????? ? ?????? ??????? ?? ? ??? ?? ???????
    %%??????????
F=c*(abs(X(i)-X(i+1))-L)-c*(abs(X(i)-X(i-1))-L);
V(i)=V(i)+F/m*dt;

end

E_k=0;
for i=1:N
    E_k=E_k+m*V(i)^2*0.5;
end
Ar_k=[Ar_k E_k];
E_p=0;
for i=1:(N-1)
    E_p=E_p+c*(abs(X(i)-X(i+1))-L)^2*0.5;
end
Ar_p=[Ar_p E_p];
E_f=E_k+E_p;
Ar_f=[Ar_f E_f];

%%???????? ??? ????? ? ?????? ???????
F=c*(abs(X(1)-X(2))-L);
V(1)=V(1)+F/m*dt;

F=-c*(abs(X(N)-X(N-1))-L);
V(N)=V(N)+F/m*dt;
%%%%????????? ???????
% ????? ??? ??????????
V(1)=0;% 1) ???????? ????? ?????, ? ????? ?????? ???????? ????? ????? 0
%??????????? ??????????
X=X+V.*dt;
%% ????????????
if mod(it,17)==0
subplot(2,1,1)
    
    plot(X,zeros(1,N),'ro','Markersize',15);
subplot(2,1,2)
hold on
plot(Ar_k,'h')
plot(Ar_p,'r')
plot(Ar_f,'k')% ???????? ??????


    pause(0.01)%%? ????????
clf% ???????? ??????
end
end
%%C????? ???????? ??????? ?????? ? ????????????
%?????????? ??? ???????

% ??????? ?? ??? ???????? ? ??????????

